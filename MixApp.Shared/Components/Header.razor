@inherits MixApp.Shared.Components.HeaderBase

@inject LocaleManager LM

<div class="mixHeader">
    <div class="mix">
        <img src="/favicon.png" class="mixIcon"/>
        <span class="mixInfo">Mix Store</span>
    </div>
    <FluentSearch @bind-Value="@Keyword" 
        @oninput="@(e => Keyword = e.Value?.ToString())"
        class="search" 
        Placeholder=@LM.Scripts["c.search_box.search"] />

    @if(!string.IsNullOrEmpty(Keyword))
    {
        <div class="searchContent animate__animated animate__fadeInDown">
            <FluentDataGrid class="searchResult" Items="@SearchResults.AsQueryable()" GridTemplateColumns="1fr 1fr 2fr 1fr" ResizableColumns=true Virtualize="true" >
                <TemplateColumn Title=@LM.Scripts["c.search_box.identifier"]>
                    <FluentBadge @onclick=@(_ => OpenSoftware(context)) Appearance="Appearance.Accent" Fill="highlight">@context.PackageIdentifier</FluentBadge>
                </TemplateColumn>

                <TemplateColumn Title=@LM.Scripts["c.search_box.name"]>
                    <FluentBadge @onclick=@(_ => OpenSoftware(context)) Appearance="Appearance.Accent" Fill="highlight">@context.PackageName</FluentBadge>
                </TemplateColumn>

                <TemplateColumn Title=@LM.Scripts["c.search_box.description"]>
                    <FluentBadge @onclick=@(_ => OpenSoftware(context)) Appearance="Appearance.Accent" Fill="highlight">@context.ShortDescription</FluentBadge>
                </TemplateColumn>

                <TemplateColumn Title=@LM.Scripts["c.search_box.publisher"]>
                    <FluentBadge @onclick=@(_ => OpenSoftware(context)) Appearance="Appearance.Accent" Fill="highlight">@context.Publisher</FluentBadge>
                </TemplateColumn>
                
                <TemplateColumn Title=@LM.Scripts["c.search_box.open"]>
                    <FluentBadge @onclick=@(_ => OpenSoftware(context)) Appearance="Appearance.Accent" Fill="highlight">@LM.Scripts["c.search_box.open"]</FluentBadge>
                </TemplateColumn>
            </FluentDataGrid>
        </div>
    }
</div>

<style>
    .mixHeader {
        position: relative;
        display: flex;
        justify-content: center;
        background-color: var(--neutral-fill-layer-rest);
        position: relative;
        height: 60px;
    }

    .mix{
        position: absolute;
        left: 25px;
        top: 15px;
    }

    .mix .mixIcon{
        width: 30px;
        height: 30px;
        display: inline-block;
        vertical-align: middle;
    }

    .mix .mixInfo{
        padding-left: 10px;
        font-size: 15px;
        font-weight: bold;
        display: inline-block;
        vertical-align: middle;
    }

    .mixHeader .search {
        width: 50%; 
        margin: 15px;
        margin-right: 10px;
    }

    .mixHeader .searchContent {
        position: absolute;
        margin: 60px;
        overflow-y: scroll;
        text-align: left;
        max-height: calc(100vh - 200px);
        z-index: 10;
        box-shadow: 0 0 10px 0 rgba(0,0,0,.5);
        background-color: var(--fill-color);
        border-radius: 5px;
    }

    .mixHeader ::-webkit-scrollbar {
        display: none;
    }

    .mixHeader .searchResult {
        padding: 20px;
    }

    @@media only screen and (max-width: 950px) {
        .mixHeader .search {
            display: none;
        }
    }
</style>